<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
</head>
<body>
<div id="progress"></div>
<pre id="output">
        </pre>
<script>
    let __total_done = 0;
    let __total_tests = 0;
    __karma__ = {
        start: undefined,
        result: function(arg) {
            __total_done++;
            document.getElementById('progress').innerText = 'Progress: ' + __total_done + ' / ' + __total_tests;
            if (!arg.success) {
                if (arg.error !== undefined) {
                    console.error(arg.error);
                }
                document.getElementById('output').innerText += "\nFAILED: " +
                    arg.suite[0] + " " + arg.description;
            }
            for (let e of arg.log) {
                document.getElementById('output').innerText += "\n     " + e;
            }
        },
        info: function(arg) {
            __total_tests = arg.total;
            document.getElementById('progress').innerText = 'Progress: ' + __total_done + ' / ' + __total_tests;
            document.getElementById('output').innerText += "\nTotal tests: " + arg.total + "\nRunning...";
        },
        complete: function() {
            document.getElementById('output').innerText += "\nDone";
        }
    };
    <!-- INCLUDE SOURCE PART -->
    async function run_tests() {
        await _gen_completed;
        document.getElementById('output').innerText = "Starting...";
        setTimeout(() => __karma__.start(), 0);
    }
    run_tests();
</script>
</body>
</html>
